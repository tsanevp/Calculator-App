<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Calculator App</title>
    <link rel="icon" type="image/x-icon" href="images/calculator-favicon.png">
    <link type="text/css" href="css/style.css" rel="stylesheet">

</head>

<body>

    <div class="top-container">
        <h1 id="calculator-title">Calculator App</h1>
    </div>

    <form class="calculator card" action="/" method="post" >

        <input type="text" class="calculator-screen z-depth-1" value="" disabled />

        <div class="calculator-keys">
            <button type="button" value="+" class="operator btn btn-info" onclick="handleButtonClick('+')">+</button>
            <button type="button" value="-" class="operator btn btn-info" onclick="handleButtonClick('-')">-</button>
            <button type="button" value="*" class="operator btn btn-info" onclick="handleButtonClick('*')">&times;</button>
            <button type="button" value="/" class="operator btn btn-info" onclick="handleButtonClick('/')">&divide;</button>

            <button type="button" value="7" class="btn btn-light waves-effect" onclick="handleButtonClick('7')">7</button>
            <button type="button" value="8" class="btn btn-light waves-effect" onclick="handleButtonClick('8')">8</button>
            <button type="button" value="9" class="btn btn-light waves-effect" onclick="handleButtonClick('9')">9</button>

            <button type="button" value="4" class="btn btn-light waves-effect" onclick="handleButtonClick('4')">4</button>
            <button type="button" value="5" class="btn btn-light waves-effect" onclick="handleButtonClick('5')">5</button>
            <button type="button" value="6" class="btn btn-light waves-effect" onclick="handleButtonClick('6')">6</button>

            <button type="button" value="1" class="btn btn-light waves-effect" onclick="handleButtonClick('1')">1</button>
            <button type="button" value="2" class="btn btn-light waves-effect" onclick="handleButtonClick('2')">2</button>
            <button type="button" value="3" class="btn btn-light waves-effect" onclick="handleButtonClick('3')">3</button>

            <button type="button" value="0" class="btn btn-light waves-effect" onclick="handleButtonClick('0')">0</button>
            <button type="button" value="." class="decimal function btn btn-secondary" onclick="handleButtonClick('.')">.</button>
            <button type="button" value="all-clear" class="all-clear function btn btn-danger btn-sm" onclick="handleButtonClick('ac')">AC</button>

            <button type="button" name="equals" class="equal-sign operator btn btn-default" value="=" onclick="handleButtonClick('=')">=</button>
        </div>
    </form>

    <script>
        async function handleButtonClick(buttonClicked) {

            const response = await fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ buttonClicked }),
            });

            const data = await response.json();
            const result = data.result;
            document.querySelector('.calculator-screen').value = result;
        }
    </script>
</body>

</html>